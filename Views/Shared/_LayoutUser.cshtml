@{
    var userName = Context.Session.GetString("UserName") ?? "User";
}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="/css/UserLayout.css" />
    <link rel="stylesheet" href="/css/notificationstyle.css" />
    <link rel="stylesheet" href="/css/messagenotifications.css" />
    <title>@ViewBag.Title</title>
</head>
<body>
    <header class="main-header">
        <div class="header-content">
            <a asp-action="User_MainPage" asp-controller="User" class="logo">
                <img style="height: 50px; width: 100px; background-color: #f0f8ff" src="/images/PrimeMarket_Logo_V2.png" alt="PrimeMarket Logo" />
            </a>
            <div class="header-actions">
                <div class="search-box">
                    <a asp-action="Search_Page" asp-controller="Home">
                        <input type="text" placeholder="Search for a listed item" />
                    </a>
                </div>

                <a asp-action="MyProfilePage" asp-controller="User"><p>@userName</p></a>
                <form asp-action="Logout" asp-controller="User" method="post" style="display: inline;">
                    <button type="submit" class="btn-logout">Logout</button>
                </form>

                <!-- ✅ Listing Notifications -->
                <div class="notification-wrapper">
                    <img id="listingNotificationBell" class="notification-icon" style="margin-top:10px ; height: 25px; width: 25px; cursor: pointer;" src="/images/NotificationBell.png" alt="Listing Notification Bell" />
                    <div id="listingNotificationDropdown" class="notification-dropdown">
                        <a asp-action="MyListing" asp-controller="User">
                            <p class="notification-item">One of your listings has been approved.</p>
                        </a>
                        <p class="notification-item" id="rejectedListingNotice" style="cursor: pointer;">One of your listings has been rejected.</p>
                        <a asp-action="Index" asp-controller="Notifications">
                            <p style="color:black">All Notifications</p>
                        </a>
                    </div>
                </div>

                <!-- ✅ Message Notifications -->
                <div class="notification-wrapper">
                    <img id="messageNotificationBell" class="notification-icon" style="margin-top:10px ; height: 25px; width: 25px; cursor: pointer;" src="/images/MessagesIcon.png" alt="Message Notification Bell" />
                    <div id="messageNotificationDropdown" class="notification-dropdown">
                        <a asp-action="Conversation" asp-controller="Message" asp-route-userId="" asp-route-listingId="">
                            <p class="notification-item">A buyer has sent you a message.</p>
                        </a>
                        <a asp-action="Conversations" asp-controller="Message">
                            <p style="color:black">All Messages</p>
                        </a>
                    </div>
                </div>

                <a asp-action="MyBookmarks" asp-controller="User"><img style="margin-top:10px ; height: 25px; width: 25px;" src="/images/bookmark-button.png" alt="Bookmarks" /></a>
                <a asp-action="Cart" asp-controller="Payment"><img style="margin-top:10px ; height: 25px; width: 25px;" src="/images/shopping_cart_icon.png" alt="Shopping Cart" /></a>
                <a asp-action="CreateListing" asp-controller="User"><button class="btn-list">List an Item</button></a>
            </div>
        </div>
    </header>

    <div>
        @RenderBody()
    </div>

    <!-- ✅ Modal for Rejection Reason -->
    <div id="rejectionModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.5); z-index:999;">
        <div style="background-color:white; padding:20px; border-radius:8px; max-width:400px; margin:100px auto; position:relative;">
            <span id="closeRejectionModal" style="position:absolute; top:10px; right:15px; cursor:pointer; font-size:20px;">&times;</span>
            <h3>Listing Rejected</h3>
        </div>
    </div>

    
    <script src="/js/site.js"></script>

</body>
</html>